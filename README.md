## macOS Sequoia EFI for ThinkPad X1 Carbon Gen 8 (Touchscreen)

This EFI enables a fully functional macOS Sequoia experience on the Lenovo ThinkPad X1 Carbon Gen 8 with a touchscreen. It's optimized for stability, performance, and power efficiency while maintaining full dual-boot compatibility with Windows.

# Features
‚úÖ macOS Sequoia compatibility with OpenCore
‚úÖ Native macOS experience with almost full hardware support
‚úÖ Touchscreen functionality
‚úÖ Proper dual boot with Windows via OpenCore
‚úÖ Boot Camp works like a real Mac with [[Brigadier](https://github.com/timsutton/brigadier)]
‚úÖ Windows partition runs on VMware/Parallels installed from Boot Camp on macOS
‚úÖ Wi-Fi & Bluetooth (with compatible card)
‚úÖ Full power management, sleep/wake support
‚úÖ Audio, trackpad, and keyboard working as expected
‚úÖ USB mapping for optimal functionality


<details>  
<summary><strong>NOT WORKING ‚ùå</strong></summary>
<br>

| Feature                              | Status | Dependency          | Remarks                      |
| :----------------------------------- | ------ | ------------------- | ---------------------------- |
| Fingerprint Reader | ‚ùå | - | Will never work |
| Wireless WAN | ‚ùå | `DISABLED` in BIOS to save power. | Unable to investigate as I have no need and my model did not come with WWAN |
| DRM | ‚ùå | iGPU | DRM is broken with iGPUs |
| Internal Microphone | ‚ùå | - | I hope it will work one day |
| Thunderbolt 3 | ‚ùå | - | Not working |
| Continuity Camera | ‚ùå | - | Not working with Intel wireless cards |
| AirDrop | ‚ùå | - | Not working with Intel wireless cards |
| Apple Watch Auto Unlock | ‚ùå | - | Not working with Intel wireless cards |
| Instant Hotspot | ‚ùå | - | Not working with Intel wireless cards |
| Sidecar (wireless) | ‚ùå | - | Not working with Intel wireless cards |
| Continuity Markup and Sketch | ‚ùå | - | Not working with Intel wireless cards |
| Handoff | ‚ùå | - | Support dropped with macOS Sonoma and the new AirportIltwm kext |
| Universal Clipboard | ‚ùå | - | Support dropped with macOS Sonoma and the new AirportIltwm kext |
| SMS & Phone Call via iPhone | ‚ùå | - | Support dropped with macOS Sonoma and the new AirportIltwm kext |
| AirPlay to Mac | ‚ùå | - | Support dropped with macOS Sonoma and the new AirportIltwm kext |

</details>  

# Installation
https://www.youtube.com/watch?v=Ft5octI9Y8k

# How I made this EFI

Firstly I ran [OpCore-Simplify](https://github.com/lzhoang2801/OpCore-Simplify) as a starting point. Then I used [SSDTTime](https://github.com/corpnewt/SSDTTime) to replace OpCore-Simplify's generated ACPI to fix the windows bluescreen when launched from OpenCORE. You have to keep the SSDT-XOSI generated by OpCore-Simplify.


# Before Installation

<details><summary><strong>UEFI SETTINGS</strong></summary>
<br>
	
**Config**

- **Keyboard/Mouse**
  - `Trackpoint` **Enabled**
  - `Trackpad` **Enabled**
- **Display**
  - `Boot Display Device` **ThinkPad LCD**
  - `Total Graphics Memory` **512MB**
  - `Boot Time Extension` **Disabled**
- **CPU**
  - `Intel Hyper-Threading Technology` **Enabled**
- **Thunderbolt**
  - `Thunderbolt BIOS Assist Mode` **Disabled**
  - `Security Level` **No Security**
  - `Support in Pre Boot Environment -> Thunderbolt(TM) device` **Disabled**

**Security**

- **Memory Protection**
  - `Execution Prevention` **Enabled**
- **Virtualization**
  - `Kernel DMA Protection` **Disabled**
  - `Intel Virtualization Technology` **Enabled**
  - `Intel VT-d Feature` **Disabled**
  - `Enhanced Windows Biometric Security` **Disabled**
- **I/O Port Access**
  - `Wireless WAN` **Disabled**
- **Secure Boot**
  - `Secure Boot` **Disabled**
- **Intel SGX**
  - `Intel SGX Control` **Disabled**
- **Device Guard**
  - `Device Guard` **Disabled**

**Startup**

- `UEFI/Legacy Boot` **UEFI Only**
- `CSM Support` **No**
- `Boot Mode` **Quick**

</details>  

# Post Install
## Audio

Using the Layout ID 71 will enable the 4 speakers (Top front & Bottom rear) in System Preferences>Sound allowing you to select either set of speakers (Two Output). To combine the two you'll need to open Audio MIDI Setup and create Multi-Output Device with both sets of speakers. Unfortunately you can't control natively the volume of an Aggregate Device with the volume keys. You'll need to install [AggregateVolumeMenu](https://github.com/adaskar/AggregateVolumeMenu)

## Power Management
https://dortania.github.io/OpenCore-Post-Install/universal/pm.html#using-cpufriend

## Fixing Windows Login in VMware/Parallels
<details><summary><strong>Registry Edits</strong></summary>
<br>

To avoid issues logging into Windows while running it in VMware or Parallels from your Boot Camp partition, apply this registry fix:

Open Registry Editor (regedit.exe).

Navigate to:

Copy
Edit
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\PasswordLess\Device
Locate DevicePasswordLessBuildVersion and change its value from 2 to 0.

Restart Windows.

This disables the "Require Windows Hello" setting and ensures smooth logins.

Fixing Microsoft Account Login Issues in VMware/Parallels
To make Windows authenticate Microsoft accounts correctly while running in a VM, you need to enable some logon services and ensure network access is active.

Registry Changes for Services
Open Registry Editor (regedit.exe).

Navigate to:

sql
Copy
Edit
HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services
Modify the Start key for each of the following services:

Set to Manual (Start = 3):

lmhosts (TCP/IP NetBIOS Helper)

Netman (Network Connections)

VaultSvc (Credential Manager)

Wecsvc (Windows Event Collector)

WbioSrvc (Windows Biometric Service)

wlidsvc (Microsoft Account Sign-in Assistant)



Set to Automatic (Start = 2):

Dhcp (DHCP Client)

EventLog (Windows Event Log)

EventSystem (COM+ Event System)

LanmanServer (Server)

LanmanWorkstation (Workstation)

NlaSvc (Network Location Awareness)

nsi (Network Store Interface Service)

SamSs (Security Accounts Manager)

Reboot Windows.

After applying these changes, Windows should be able to contact Microsoft's servers and validate your password, allowing you to log in without issues.

</details>  



## Credits
Huge thanks to the OpenCore community, Dortania guides, and everyone contributing to Hackintosh development.

## Download & Support
https://github.com/HJebbour/ThinkPad-X1C8-Hackintosh
https://dortania.github.io/OpenCore-Install-Guide/
https://github.com/lzhoang2801/OpCore-Simplify
https://litemint09.mystrikingly.com/
https://linustechtips.com/topic/1345153-unable-to-logon-to-windows-with-message-something-happened-and-your-pin-isnt-available-click-to-set-up-your-pin-again/
If you have any issues, feel free to open an issue or discuss in the forums! üöÄ
